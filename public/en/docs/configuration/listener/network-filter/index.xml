<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>bRPC â€“ Network Filter</title>
    <link>https://brpc.incubator.apache.org/en/docs/configuration/listener/network-filter/</link>
    <description>Recent content in Network Filter on bRPC</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Mon, 20 Jan 2020 00:00:00 +0000</lastBuildDate>
    
	  <atom:link href="https://brpc.incubator.apache.org/en/docs/configuration/listener/network-filter/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>Docs: proxy</title>
      <link>https://brpc.incubator.apache.org/en/docs/configuration/listener/network-filter/proxy/</link>
      <pubDate>Mon, 20 Jan 2020 00:00:00 +0000</pubDate>
      
      <guid>https://brpc.incubator.apache.org/en/docs/configuration/listener/network-filter/proxy/</guid>
      <description>
        
        
        &lt;p&gt;proxy is the most common network filter in MOSN and is configured in the following format:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;downstream_protocol&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;upstream_protocol&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;router_config_name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;extend_config&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:{}&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;downstream_protocol&lt;/code&gt;: The request protocol that the proxy expects to receive. When receiving data from a connection, MOSN uses this protocol to parse and forward packets. If the received packet protocol does not comply with the configuration, MOSN closes the connection.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;upstream_protocol&lt;/code&gt;: The protocol used by the proxy to forward data. Usually, this field needs to be consistent with &lt;code&gt;downstream_protocol&lt;/code&gt;. Protocol conversion is performed only in special scenarios.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;router_config_name&lt;/code&gt;: The router configuration index of the proxy. Usually, this field is consistent with &lt;code&gt;router_config_name&lt;/code&gt; configured in &lt;code&gt;connection_manager&lt;/code&gt; of the listener.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;extend_config&lt;/code&gt;: The extension configuration, used only in &lt;code&gt;XProtocol&lt;/code&gt; of MOSN currently.&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
    
    <item>
      <title>Docs: connection_manager</title>
      <link>https://brpc.incubator.apache.org/en/docs/configuration/listener/network-filter/connection-manager/</link>
      <pubDate>Mon, 20 Jan 2020 00:00:00 +0000</pubDate>
      
      <guid>https://brpc.incubator.apache.org/en/docs/configuration/listener/network-filter/connection-manager/</guid>
      <description>
        
        
        &lt;p&gt;&lt;code&gt;connection_manager&lt;/code&gt; specifies the router configurations of MOSN and is usually used with proxy.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  &amp;quot;router_config_name&amp;quot;:&amp;quot;&amp;quot;,
  &amp;quot;virtual_hosts&amp;quot;: [
  ]
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;router_config_name&lt;/code&gt;: The unique router configuration ID, which corresponds to the field configured in &lt;code&gt;proxy&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;virtual_hosts&lt;/code&gt;: specifies the specific routing rules.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;virtualhost&#34;&gt;VirtualHost&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;domains&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:[],&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;routers&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:[]&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt;: String. The unique ID of a virtual host.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;domains&lt;/code&gt;: String array. Indicates a group of domains that match the virtual host. Wildcard characters are supported. The matching priorities of domains are as follows:
&lt;ul&gt;
&lt;li&gt;First, exact match, for example, &lt;code&gt;www.foo.com&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Second, wildcard match with the longest suffix. For example, &lt;code&gt;*-bar.foo.com&lt;/code&gt; is a preferred match for the domain &lt;code&gt;foo-bar.foo.com&lt;/code&gt; between &lt;code&gt;*.foo.com&lt;/code&gt; and &lt;code&gt;*-bar.foo.com&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;At last, wildcard match for any domains, that is, &lt;code&gt;*&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;routers&lt;/code&gt;: A group of specific router rules.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;router&#34;&gt;Router&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;match&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:{},&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;route&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:{},&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;per_filter_config&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:{}&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;match&lt;/code&gt;: The router match parameter.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;route&lt;/code&gt;: The routing behavior. Specifies the upstream information of a request to be routed.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;per_filter_config&lt;/code&gt;: The filter configuration in the &lt;code&gt;key: json&lt;/code&gt; format.
&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;key&lt;/code&gt; needs to match the type of a stream filter, and the &lt;code&gt;json&lt;/code&gt; corresponding to the key is the the value configured for the stream filter.&lt;/li&gt;
&lt;li&gt;When this field is configured, the configurations indicated by this field can be used to overwrite the original configurations of some stream filters (depending on specific filters), to generate stream filter configurations at the router match level.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;match&#34;&gt;match&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;prefix&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;path&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;regex&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;headers&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt; &lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;[]&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Path match
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;prefix&lt;/code&gt;: Indicates that the router will match the path prefix. This configuration has a higher priority than path and regex. If this field is configured, the path prefix of the request needs to first comply with this configuration.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;path&lt;/code&gt;: Indicates that the router will perform exact match the path. This configuration has a higher priority than regex. If this field is configured, the path of the request needs to first comply with this configuration.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;regex&lt;/code&gt;: Indicates that the router will match the path based on a regular expression. If this field is configured, the path of the request needs to first comply with this configuration.&lt;/li&gt;
&lt;li&gt;When multiple path match configurations are available, only the one with a higher priority takes effect.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Header match
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;headers&lt;/code&gt;: The group of headers that the request needs to match. The match succeeds only when the request meets all header configuration conditions.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;header&#34;&gt;header&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;value&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;regex&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt;: The key of the header.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;value&lt;/code&gt;: The value of the header key.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;regex&lt;/code&gt;: Boolean. Specifies whether the value can be matched by a regular expression. Default values: True and False.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;route&#34;&gt;route&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;{
  &amp;quot;cluster_name&amp;quot;:&amp;quot;&amp;quot;,
  &amp;quot;metadata_match&amp;quot;:&amp;quot;&amp;quot;,
  &amp;quot;timeout&amp;quot;:&amp;quot;&amp;quot;,
  &amp;quot;retry_policy&amp;quot;:{}
}
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cluster_name&lt;/code&gt;: The upstream cluster to which the request is to be routed.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;metadata_match&lt;/code&gt;: The &lt;a href=&#34;../../../custom#metadata&#34;&gt;metadata&lt;/a&gt; configuration. If this field is configured, the router will match the subset of the upstream cluster based on the metadata.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;timeout&lt;/code&gt;: Thee &lt;a href=&#34;../../../custom#duration-string&#34;&gt;Duration String&lt;/a&gt; configuration. Indicates the default forwarding timeout value of the request. If the timeout value is specified in the request, this configuration will be ignored.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;retry_policy&lt;/code&gt;: The retry configuration, which indicates the retry policy applied when the request encounters a specific error. If this field is left unconfigured, no retry will be performed by default.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;retry_policy&#34;&gt;retry_policy&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;{&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;retry_on&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;retry_timeout&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;,&lt;/span&gt;
  &lt;span style=&#34;color:#204a87;font-weight:bold&#34;&gt;&amp;#34;num_retries&amp;#34;&lt;/span&gt;&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;:&lt;/span&gt;&lt;span style=&#34;color:#4e9a06&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;span style=&#34;color:#000;font-weight:bold&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;retry_on&lt;/code&gt;: Boolean. Specifies whether to enable retry.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;retry_timeout&lt;/code&gt;: The &lt;a href=&#34;../../../custom#duration-string&#34;&gt;Duration String&lt;/a&gt; configuration. Indicates the timeout value for each retry. When &lt;code&gt;retry_timeout&lt;/code&gt; exceeds the timeout value specified in the route field or request, this configuration is invalid.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;num_retries&lt;/code&gt;: Indicates the maximum number of retries supported.&lt;/li&gt;
&lt;/ul&gt;

      </description>
    </item>
    
  </channel>
</rss>
